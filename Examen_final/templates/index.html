<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank Callcenter Campaign</title>
    <!-- Bootstrap CSS link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Plotly JS library -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="container mt-5">
    <div class="row">
        <div>
            <header>
                <h1 class="text-center mb-4">Bank Call Campaign</h1>
                
                <form method="post" class="mb-4 col-md-6 offset-md-3">
                    <div class="mb-3">
                        <label for="num" class="form-label">How many graphs would you like to see? (max. 6):</label>
                        <input type="number" id="num" name="num" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-dark w-100">Submit</button>
                </form>
            </header>
            
            <main>
                {% if fig1 %}
                    <div class="mb-4">
                        <hr>
                        <h2 class="text-center">Distribution by education level</h2>
                        <p>To understand to which clients to target the campaign, we must understand which type of clients we have. One of the variables to find that is the education level:</p>
                        {{ fig1 | safe }}
                        <p>As can be seen in the graph above, the biggest chunk of the clients have only up to <strong>secondary education</strong>.</p>
                    </div>
                {% endif %}

                {% if fig2 %}
                    <div class="mb-4">
                        <hr>
                        <h2 class="text-center">Distribution by age</h2>
                        <p>Apart from the education level, it would be interesting to know how our clients are distributed based on their age:</p>
                        {{ fig2 | safe }}
                        <p>We can see most of our clients are <strong>young</strong>, whith more than half being under 40 years old.</p>
                    </div>
                {% endif %}

                {% if fig3 %}
                    <div class="mb-4">
                        <hr>
                        <h2 class="text-center">Balance in bank by job position</h2>
                        <p>The job position may be a strong indicator of the income a person has. It may be interesting to see if this hold within our client list:</p>
                        {{ fig3 | safe }}
                        <p>The vast majority of the clients have under <strong>20k</strong> in the bank.</p>
                    </div>
                {% endif %}

                {% if fig4 %}
                    <div class="mb-4">
                        <hr>
                        <h2 class="text-center">Taking a closer look on clients' jobs...</h2>
                        <p>We saw clients do not have too much money in the bank. This may be due to hardship in their job. It could be interesting to understand what our clients work at to get more insights on what they may need.</p>
                        {{ fig4 | safe }}
                        <p>The biggest group are <strong>technicians</strong> and, excluding those whose job we do not know, the next group is <strong>unemployed</strong>.</p>
                    </div>
                {% endif %}

                {% if fig5 %}
                    <div class="mb-4">
                        <hr>
                        <h2 class="text-center">Prediction of bank loans using all variables</h2>
                        <p>It finally could be interesting to predict whether clients are going to ask for a loan based on all the considered variables. To see this, we can create a Support Vector Machine (SVM) and plot the confussion matrix of the predictions</p>
                        {{ fig5 | safe }}
                        <p>The model get very well the clients that will ask for the loan, not so much those that will not.</p>
                    </div>
                {% endif %}

                {% if fig6 %}
                    <div class="mb-4">
                        <hr>
                        <h2 class="text-center">Correlation Matrix of Variables</h2>
                        <p>To see what variables might be good predictors for the fact of whether the clients would ask for a loan or not, we can look at the correlation matrix:</p>
                        {{ fig6 | safe }}
                        <p>The most relevant variables to predict the service are <strong>duration, housing and contact</strong>.</p>
                    </div>
                {% endif %}

                {% if error_message %}
                    <div class="alert alert-danger" role="alert">
                        {{ error_message }}
                    </div>
                {% endif %}
            </main>
        </div>
    </div>

    <!-- Bootstrap JS and Popper.js scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-o2XZME6zDbk3u5i8Q9b1BHHWBJMz9p2vvD2Em4qmSfUp8y8W+Dd9jS9vRXFhEf7w" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-eziFk5Sd8DwFQOW3CqWOhcC8pPO95bR+3Q4zPxH8jzOq82+PDDzyIh2csFBfBm6x" crossorigin="anonymous"></script>
</body>
</html>
